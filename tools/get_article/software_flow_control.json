{
  "content": [
    {
      "type": "text",
      "text": "# Software flow control\n\nSoftware flow control is a method of flow control used in computer data links, especially RS-232 serial.  It uses special codes, transmitted in-band, over the primary communications channel.  These codes are generally called XOFF and XON (from \"transmit off\" and \"transmit on\", respectively).  Thus, \"software flow control\" is sometimes called \"XON/XOFF flow control\".  This is in contrast to flow control via dedicated out-of-band signals — \"hardware flow control\" — such as RS-232 RTS/CTS.\nRepresentation\nFor systems using the ASCII character code, XOFF is generally represented using a character or byte with decimal value 19; XON with value 17.\nThe ASCII standard does not reserve any control characters for use as XON/XOFF specifically.  However, it does provide four generic \"device control\" characters (DC1 through DC4).  The Teletype Model 33 ASR adopted two of these, DC3 and DC1, for use as XOFF and XON, respectively.  This usage was copied by others, and is now a de facto standard.  The keyboard equivalents of  for XOFF, and  for XON, also derive from this usage.\n{| class=\"wikitable\"\n|+ XOFF/XON representations in ASCII\n! Code\n! Meaning\n! ASCII\n! Dec\n! Hex\n! Keyboard\n|-\n| XOFF\n| Pause transmission\n| DC3\n| 19\n| 13\n|\n|-\n| XON\n| Resume transmission\n| DC1\n| 17\n| 11\n|\n|}\nMechanism\nWhen one end of a data link is unable to accept any more data (or approaching that point), it sends XOFF to the other end.  The other end receives the XOFF code, and suspends transmission.  Once the first end is ready to accept data again, it sends XON, and the other end resumes transmission.\nFor example, one may imagine a computer sending data to a slow printer. Since the computer is faster at sending data than the printer can print it, the printer falls behind and approaches a situation where it would be overwhelmed by the data.  The printer reacts to this situation by sending XOFF to the computer, which temporarily stops sending data.  When the printer is again ready to receive more data, it sends XON to the computer, which starts sending data again.\nXOFF/XON can be employed in both directions, for example, two teleprinters connected to each other.\nComparison with hardware flow control\nThe principal advantage of software flow control is the reduction in the number of electrical conductors between sender and receiver.  Given a common ground, only two signals are needed, one to send and the other to receive.  Hardware flow control requires additional wires between the two devices.  It also requires specific hardware implementation, which had more significant costs in earlier days of computing (i.e., 1960s and 70s).\nHowever, software flow control is not without its problems. The most important drawback is that software flow control is less reliable. Sending XOFF requires at least one character time to transmit, and may be queued behind already-transmitted data still in buffers.  Hardware signals may be asserted almost instantaneously, and out-of-order.\n{| class=\"wikitable floatright\"|\n|+ Summary of flow control tradeoffs\n!\n!\n!\n!\n|-\n| Hardware flow control\n| Most reliable\n|\n|\n|-\n| On-chip software f.c.\n| Good\n|\n|\n|-\n| Software f.c. (FIFO disabled)\n| Good, but slow\n|\n|\n|-\n| Software f.c. (FIFO enabled)\n| Unreliable\n|\n|\n|}\nAs the name \"software flow control\" implies, flow control using this method is usually implemented in software (or firmware), which can cause further delays in XOFF response. These delays can lead to data corruption due to buffer overruns. Hardware flow control, on the other hand, is typically under the direct control of the transmitting UART, which is able to cease transmission immediately, without the intervention of higher levels. To handle the latency caused by builtin FIFOs, more advanced UARTs, like the 16950, provide \"on-chip\" software flow control. UARTs that lack such support, like the 16550, may suffer from buffer overruns when using software flow control, although this can be somewhat mitigated by disabling the UART's FIFO.\nFinally, since the XOFF/XON codes are sent in-band, they cannot appear in the data being transmitted without being mistaken for flow control commands.  Any data containing the XOFF/XON codes thus must be encoded in some manner for proper transmission, with corresponding overhead.  This is frequently done with some kind of escape sequence.  For printing devices that directly interpret ASCII codes, this is not a large problem, because the XON and XOFF codes use ASCII \"device control\" code numbers.\nApplications\nSoftware flow control is used extensively by low-speed devices, especially older printers and dumb terminals, to indicate they are temporarily unable to accept more data.  Typically, this is due to a combination of limited output rate and any buffers being full.  Some terminal control packages, such as termcap, employ \"padding\" (short delays using millisecond granularity) to allow such equipment sufficient time to perform the requested actions without the need to assert XOFF.\nXOFF/XON are still sometimes used manually by computer operators, to pause and restart output which otherwise would scroll off the display too quickly.\nTerminal emulator software generally implements XOFF/XON support as a basic function.  This generally includes the system console on modern Unix and Linux machines, as well as GUI emulators such as xterm and the Win32 console.\nRobust XON is a technique to restart communication, just in case it was stopped by an accidentally received XOFF.  The receiving unit sends periodic XON characters when it can receive data, and the line is idle.  One common use is by serial printers (like HP LaserJet II) to indicate they are online and ready to receive data. The XON is sent every 1 to 30 seconds depending on the printer's firmware design.\nSee also\n* Ethernet flow control\nReferences\n*"
    }
  ]
}