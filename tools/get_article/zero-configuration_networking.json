{
  "content": [
    {
      "type": "text",
      "text": "# Zero-configuration networking\n\nZero-configuration networking (zeroconf) is a set of technologies that automatically creates a usable computer network based on the Internet Protocol Suite (TCP/IP) when computers or network peripherals are interconnected. It does not require manual operator intervention or special configuration servers. Without zeroconf, a network administrator must set up network services, such as Dynamic Host Configuration Protocol (DHCP) and Domain Name System (DNS), or configure each computer's network settings manually.\nZeroconf is built on three core technologies: automatic assignment of numeric network addresses for networked devices, automatic distribution and resolution of computer hostnames, and automatic location of network services, such as printing devices.\nBackground\nComputer networks use numeric network addresses to identify communications endpoints in a network of participating devices. This is similar to the telephone network which assigns a string of digits to identify each telephone. In modern networking protocols, information to be transmitted is divided into a series of network packets. Every packet contains the source and destination addresses for the transmission. Network routers examine these addresses to determine the best network path in forwarding the data packet at each step toward its destination.\nSimilarly to telephones being labeled with their telephone number, it was a common practice in early networks to attach an address label to networked devices. The dynamic nature of modern networks, especially residential networks in which devices are powered up only when needed, desire dynamic address assignment mechanisms that do not require user involvement for initialization and management. These systems automatically give themselves common names chosen either by the equipment manufacturer, such as a brand and model number, or chosen by users for identifying their equipment. The names and addresses are then automatically entered into a directory service.\nEarly computer networking was built upon technologies of the telecommunications networks and thus protocols tended to fall into two groups: those intended to connect local devices into a local area network (LAN), and those intended primarily for long-distance communications. The latter wide area network (WAN) systems tended to have centralized setup, where a network administrator would manually assign addresses and names. LAN systems tended to provide more automation of these tasks so that new equipment could be added to a LAN with a minimum of operator and administrator intervention.\nAn early example of a zero-configuration LAN system is AppleTalk, a protocol introduced by Apple Inc. for the early Macintosh computers in the 1980s. Macs, as well as other devices supporting the protocol, could be added to the network by simply plugging them in; all further configuration was automated. Network addresses were automatically selected by each device using a protocol known as AppleTalk Address Resolution Protocol (AARP), while each machine built its own local directory service using a protocol known as Name Binding Protocol (NBP). NBP included not only a name but the type of device and any additional user-provided information such as its physical location or availability. Users could look up any device on the network with the application Chooser, which filtered names based on the device type.\nOn Internet Protocol (IP) networks, the Domain Name System database for a network was initially maintained manually by a network administrator. Efforts to automate maintenance of this database, led to the introduction of a number of new protocols providing automated services, such as the Dynamic Host Configuration Protocol (DHCP).\nAddress selection\nHosts on a network must be assigned IP addresses that uniquely identify them to other devices on the same network. On some networks, there is a central authority that assigns these addresses as new devices are added. Mechanisms were introduced to handle this task automatically, and both IPv4 and IPv6 now include systems for address autoconfiguration, which allows a device to determine a safe address to use through simple mechanisms. For link-local addressing, IPv4 uses the special block , while IPv6 hosts use the prefix . More commonly addresses are assigned by a DHCP server, often built into common networking hardware like computer hosts or routers.\nMost IPv4 hosts use link-local addressing only as a last resort when a DHCP server is unavailable. An IPv4 host otherwise uses its DHCP-assigned address for all communications, global or link-local. One reason is that IPv4 hosts are not required to support multiple addresses per interface, although many do. Another is that not every IPv4 host implements distributed name resolution (e.g., multicast DNS), so discovering the autoconfigured link-local address of another host on the network can be difficult. Discovering the DHCP-assigned address of another host requires either distributed name resolution or a unicast DNS server with this information; Some networks feature DNS servers that are automatically updated with DHCP-assigned host and address information.\nIPv6 hosts are required to support multiple addresses per interface; moreover, every IPv6 host is required to configure a link-local address even when global addresses are available. IPv6 hosts may additionally self-configure additional addresses on receipt of router advertisement messages, thus eliminating the need for a DHCP server.\nBoth IPv4 and IPv6 hosts may randomly generate the host-specific part of an autoconfigured address. IPv6 hosts generally combine a prefix of up to 64 bits with a 64-bit EUI-64 derived from the factory-assigned 48-bit IEEE MAC address. The MAC address has the advantage of being globally unique, a basic property of the EUI-64. The IPv6 protocol stack also includes duplicate address detection to avoid conflicts with other hosts. In IPv4, the method is called link-local address autoconfiguration. However, Microsoft refers to this as Automatic Private IP Addressing (APIPA) or Internet Protocol Automatic Configuration (IPAC). The feature is supported in Windows since at least Windows 98.\nName service discovery\nInternet protocols use IP addresses for communications, but these are not easy for humans to use; IPv6 in particular uses very long strings of digits that are not easily entered manually. To address this issue, the internet has long used DNS, which allows human-readable names to be associated with IP addresses, and includes code for looking up these names from a hierarchical database system. Users type in domain names, such as example.org, which the computer's DNS software looks up in the DNS databases to retrieve an IP address, and then hands off that address to the protocol stack for further communications.\nLooking up an address using DNS requires the IP address of the DNS server to be known. This has normally been accomplished by typing in the address of a known server into a field in one of the devices on the network. In early systems, this was normally required on every device, but this has been pushed up one layer in the hierarchy to the DHCP servers or broadband devices like cable modems that receive this information from their internet service provider. This has reduced the user-side administration requirements and provides a key element of zero-configuration access.\nDNS was intended to provide uniform names to groups of devices within the same administration realm, such as example.org, provided by a name service. Assigning an address to a local device, e.g., thirdfloorprinter.example.org, normally requires administrator access to the DNS server and is often accomplished manually. Additionally, traditional DNS servers are not expected to automatically correct for changes in configuration. For instance, if a printer is moved from one floor to another it might be assigned a new IP address by the local DHCP server.\nTo address the need for automatic configuration, Microsoft implemented NetBIOS Name Service, part of which is the Computer Browser Service already in Microsoft Windows for Workgroups 3.11 as early as 1992. NetBIOS Name Service is zero-configuration on networks with a single subnet and may be used in conjunction with a WINS server or a Microsoft DNS server that supports secure automatic registration of addresses. This system has small, but not zero, management overhead even on very large enterprise networks. The protocols NetBIOS can use are part of the Server Message Block (SMB) suite of open protocols which are also available on Linux and iOS, although Windows typically supports a wider range of so-called dialects which can be negotiated between Windows clients that support it. For example, Computer Browser Services running on server operating systems or later versions of Windows are elected as so-called master browser over those that are not running a server operating system or running older versions of Windows.\nIn 2000, Bill Manning and Bill Woodcock described the Multicast Domain Name Service which spawned the implementations by Apple and Microsoft. Both implementations are very similar. Apple's Multicast DNS (mDNS) is published as a standards track proposal , while Microsoft's Link-local Multicast Name Resolution (LLMNR) is published as informational . LLMNR is included in every Windows version from Windows Vista onwards and acts as a side-by-side alternative for Microsoft's NetBIOS Name Service over IPv4 and as a replacement over IPv6, since NetBIOS is not available over IPv6. Apple's implementation is available as the Bonjour service since 2002 in Mac OS X v10.2. The Bonjour implementation (mDNSResponder) is available under the Apache 2 Open Source License and is included in Android Jelly Bean and later under the same license.\nUse of either NetBIOS or LLMNR services on Windows is essentially automatic, since using standard DNS client APIs will result in the use of either NetBIOS or LLMNR depending on what name is being resolved (whether the name is a local name or not), the network configuration in effect (e.g. DNS suffixes in effect) and (in corporate networks) the policies in effect (whether LLMNR or NetBIOS are disabled), although developers may opt into bypassing these services for individual address lookups.\nThe mDNS and LLMNR protocols have minor differences in their approach to name resolution. mDNS allows a network device to choose a domain name in the local DNS namespace and announce it using a special multicast IP address. This introduces special semantics for the top-level domain local, which is considered a problem by some members of the IETF. The current LLMNR draft allows a network device to choose any domain name, which is considered a security risk by some members of the IETF. mDNS is compatible with DNS-SD as described in the next section, while LLMNR is not.\nService discovery\nName services such as mDNS, LLMNR and others do not provide information about the type of device or its status. A user looking for a nearby printer, for instance, might be hindered if the printer was given the name Bob. Service discovery provides additional information about devices. Service discovery is sometimes combined with a name service, as in Apple's Name Binding Protocol and Microsoft's NetBIOS.\nNetBIOS Service Discovery\nNetBIOS on Windows supports individual hosts on the network to advertise services, such as file shares and printers. It also supports, for example, a network printer to advertise itself as a host sharing a printer device and any related services it supports. Depending on how a device is attached (to the network directly, or to the host which shares it) and which protocols are supported. However, Windows clients connecting to it may prefer to use SSDP or WSD using NetBIOS. NetBIOS is one of the providers on Windows implementing the more general discovery process dubbed function discovery which includes built-in providers for PnP, Registry, NetBIOS, SSDP and WSD of which the former two are local-only and the latter three support discovery of networked devices. None of these need any configuration for use on the local subnet. NetBIOS has traditionally been supported only in expensive printers for corporate use though some entry-level printers with Wi-Fi or Ethernet support it natively, allowing the printer to be used without configuration even on very old operating systems.\nWS-Discovery\nWeb Services Dynamic Discovery (WS-Discovery) is a technical specification that defines a multicast discovery protocol to locate services on a local network. It operates over TCP and UDP port 3702 and uses IP multicast address . As the name suggests, the actual communication between nodes is done using web services standards, notably SOAP-over-UDP. Windows supports it in the form of Web Services for Devices and Devices Profile for Web Services. Many devices, such as HP and Brother printers, support it.\nDNS-based service discovery\n(DNS Service Discovery) allows clients to discover a named list of service instances and to resolve those services to hostnames using standard DNS queries. The specification is compatible with existing unicast DNS server and client software, but works equally well with mDNS in a zero-configuration environment. Each service instance is described using a DNS SRV and DNS TXT record. A client discovers the list of available instances for a given service type by querying the DNS PTR record of that service type's name; the server returns zero or more names of the form &lt;Service&gt;.&lt;Domain&gt;, each corresponding to a SRV/TXT record pair. The SRV record resolves to the domain name providing the instance, while the TXT can contain service-specific configuration parameters. A client can then resolve the A/AAAA record for the domain name and connect to the service.\nService types are given on a first-come-first-serve basis. A service type registry was originally maintained by DNS-SD.org, but has since been merged into IANA's registry for DNS SRV records.\nHistory\nIn 1997 Stuart Cheshire proposed adapting Apple's mature Name Binding Protocol to IP networks to address the lack of service discovery capability. Cheshire subsequently joined Apple and authored IETF draft proposals for mDNS and DNS-based Service Discovery, supporting the transition from AppleTalk to IP networking. In 2002, Apple announced an implementation of both protocols under the name Rendezvous (later renamed Bonjour). It was first included in Mac OS X 10.2, replacing the Service Location Protocol (SLP) used in 10.1. In 2013, the proposals were ratified as  and .\nDNS-SD with multicast\nmDNS uses packets similar to unicast DNS to resolve hostnames except they are sent over a multicast link.  Each host listens on the mDNS port, 5353, transmitted to a well-known multicast address and resolves requests for the DNS record of its .local hostname (e.g. the A, AAAA, CNAME) to its IP address.  When an mDNS client needs to resolve a local hostname to an IP address, it sends a DNS request for that name to the well-known multicast address;  the computer with the corresponding A/AAAA record replies with its IP address.  The mDNS multicast address is  for IPv4 and  for IPv6 link-local addressing.\nDNS Service Discovery aka DNS-SD requests can also be sent using mDNS to yield zero-configuration DNS-SD. This uses DNS PTR, SRV, TXT records to advertise instances of service types, domain names for those instances, and optional configuration parameters for connecting to those instances. But SRV records can now resolve to .local domain names, which mDNS can resolve to local IP addresses.\nSupport\nDNS-SD is used by Apple products, most network printers, many Linux distributions including Debian and Ubuntu, and a number of third-party products for various operating systems. For example, many OS X network applications written by Apple, including Safari, iChat, and Messages, can use DNS-SD to locate nearby servers and peer-to-peer clients. Windows 10 includes support for DNS-SD for applications written using JavaScript. Individual applications may include their own support in older versions of the operating system, such that most instant messaging and VoIP clients on Windows support DNS-SD. Some Unix, BSD, and Linux distributions also include DNS-SD. For example, Ubuntu ships Avahi, an mDNS/DNS-SD implementation, in its base distribution.\nUPnP\nUPnP has some protocol components with the purpose of service discovery.\nSSDP\nSimple Service Discovery Protocol (SSDP) is a UPnP protocol, used in Windows XP and later. SSDP uses HTTP notification announcements that give a service-type URI and a Unique Service Name (USN). Service types are regulated by the Universal Plug and Play Steering Committee. SSDP is supported by many printer, NAS and appliance manufacturers such as Brother. It is supported by certain brands of network equipment, and in many SOHO firewall appliances, where host computers behind it may pierce holes for applications. It is also used in home theater PC systems to facilitate media exchange between host computers and the media center.\nDLNA\nDigital Living Network Alliance (DLNA) is another suite of standards that uses UPnP for the discovery of networked devices. DLNA has a long list of prominent manufacturers producing devices such as TVs, NAS devices and so forth that support it. DLNA is supported by all major operating systems. DLNA service discovery is layered on top of SSDP.\nEfforts toward an IETF standard protocol\nSLP is supported by Hewlett-Packard's network printers, Novell, and Sun Microsystems. SLP is described in  and  and implementations are available for both Solaris and Linux.\nAllJoyn\nAllJoyn is an open-source software stack for a myriad of devices, ranging from IoT devices to full-size computers, for discovery and control of devices on networks (Wifi, Ethernet) and other links (Bluetooth, ZigBee, etc.). It uses mDNS and HTTP over UDP and other protocols. The project has however not been active since 2016, and is not recommended to use for new projects.\nStandardization\n, the SLP standard for figuring out where to get services, was published in June 1999 by the SVRLOC IETF working group.\n, a standard for choosing addresses for networked items, was published in March 2005 by the IETF Zeroconf working group. The group included individuals from Apple, Sun, and Microsoft.\nLLMNR was submitted for official adoption in the IETF DNSEXT working group, however, failed to gain consensus and thus was published as informational  in January 2007.\nFollowing the failure of LLMNR to become an Internet standard and given that mDNS/DNS-SD is used much more widely than LLMNR, Apple was asked by the IETF to submit the mDNS/DNS-SD specs for publication as Informational RFC as well.\nIn February 2013 mDNS and DNS-SD were published as Standards Track Proposals  and .\nSecurity issues\nBecause mDNS operates under a different trust model than unicast DNS—trusting the entire network rather than a designated DNS server, it is vulnerable to spoofing attacks by any system within the same broadcast domain. Like SNMP and many other network management protocols, it can also be used by attackers to quickly gain detailed knowledge of the network and its machines. Because of this, applications should still authenticate and encrypt traffic to remote hosts (e.g. via RSA, SSH, etc.) after discovering and resolving them through DNS-SD/mDNS. LLMNR suffers from similar vulnerabilities.\nMajor implementations\nApple Bonjour\nBonjour from Apple, uses mDNS and DNS Service Discovery. Apple changed its preferred zeroconf technology from SLP to mDNS and DNS-SD between Mac OS X 10.1 and 10.2, though SLP continues to be supported by Mac OS X.\nApple's mDNSResponder has interfaces for C and Java and is available on BSD, Apple Mac OS X, Linux, other POSIX based operating systems and MS Windows. The Windows downloads are available from Apple's website.\nAvahi\nAvahi is a Zeroconf implementation for Linux and BSDs. It implements IPv4LL, mDNS and DNS-SD. It is part of most Linux distributions, and is installed by default on some. If run in conjunction with nss-mdns, it also offers host name resolution.\nAvahi also implements binary compatibility libraries that emulate Bonjour and the historical mDNS implementation Howl, so software made to use those implementations can also utilize Avahi through the emulation interfaces.\nMS Windows CE 5.0\nMicrosoft Windows CE 5.0 includes Microsoft's own implementation of LLMNR.\nSystemd\nSystemd implements both mDNS and LLMNR in systemd-resolved.\nLink-local IPv4 addresses\nWhere no DHCP server is available to assign a host an IP address, the host can select its own link-local address. Using a link-local address, hosts can communicate over this link but only locally; Access to other networks and the Internet is not possible. There are some link-local IPv4 address implementations available:\n* Apple Mac OS and MS Windows have supported link-local addresses since Windows 98 and Mac OS 8.5 (both released in 1998). Apple released its open-source implementation in the Darwin bootp package.\n* Avahi contains an implementation of IPv4LL in the avahi-autoipd tool.\n* Zero-Conf IP (zcip)\n* BusyBox can embed a simple IPv4LL implementation.\n* Stablebox, a fork from Busybox, offers a slightly modified IPv4LL implementation named llad.\n* Zeroconf is a package based on Simple IPv4LL, a shorter implementation by Arthur van Hoff.\nThe above implementations are all stand-alone daemons or plugins for DHCP clients that only deal with link-local IP addresses. Another approach is to include support in new or existing DHCP clients:\n* Elvis Pfützenreuter has written a patch for the uDHCP client/server.\n* dhcpcd is an open source DHCP client for Linux and BSD that includes IPv4LL support.  It is included as standard in NetBSD.\nNeither of these implementations addresses kernel issues like broadcasting ARP replies or closing existing network connections.\nSee also\n* Bonjour Sleep Proxy\n* Wireless Zero Configuration\n* Peer Name Resolution Protocol (PNRP)\nReferences\nNotes\nSources\n*\nExternal links\n* , a pure Java implementation of mDNS/DNS-SD.\n* , a pure Python implementation of mDNS/DNS-SD.\n* , a cross platform (Linux, MS Windows, Apple Mac), unified Mono/.NET library for Zeroconf, supporting both Bonjour and Avahi.\n* , a cross-platform wxWidgets-based service discovery module without external dependencies.\n* .\n* .\n* .\n* , including Internet drafts.\n* , DNS based Service Discovery\n*\n*\n* ."
    }
  ]
}