{
  "content": [
    {
      "type": "text",
      "text": "# Distributed Universal Number Discovery\n\nDistributed Universal Number Discovery (DUNDi) is a VoIP routing protocol that provides directory services for Asterisk systems.\nWith DUNDi peered nodes share dialplan information with each other. The protocol does not actually carry any calls, but rather provides addressing information.\nPeers in a DUNDi cluster query other peers for a telephone number to which a call is requested by a user. The result of the query is a dial string for the Asterisk application Dial.\nThe protocol was invented by Mark Spencer, the author of Asterisk.\nPeers\nAsterisk PBX systems that use DUNDi are peered as a cooperating system of DUNDi nodes, each having certain configuration to access a DUNDI instance on at least one other node.\nIn the DUNDi configuration one can limit the number of consecutive lookups between peers by setting the TTL.\n* A TTL of 1 means you only can ask the peers you know and they cannot ask further.\n* A TTL of n means that the peer you ask for a lookup can redirect your lookup to the peers it knows, only with a TTL of n-1.\nAdvertising extensions\nEach DUNDi peer can advertise its own extensions and their context. E.g. if you can connect some local E.164 number(s), you can advertise these.\nDUNDi configuration assigns a priority weight to each advertised extension.\nLow values represent a high priority and must be chosen first when more than one answer is received from a lookup.\nExample\nIn the Asterisk CLI one can do a lookup by hand to test if a DUNDi configuration works.\nasterisk1*CLI> dundi lookup 301@priv bypass\n1.     0 IAX2/priv:ByWFbOGKgGmZbM43BJHSZw@192.168.1.2/301 (EXISTS)\nfrom 00:0c:29:d2:d8:ec, expires in 3600 s\nDUNDi lookup completed in 113 ms\nThe above DUNDi lookup tells the PBX to ask the known peers if they know how to reach extension 301 in the \"priv\" network.\nThe answer consists of 6 parts:\n* The used protocol to communicate is IAX2.\n* The context-name is \"priv\".\n* The secret key of the PBX, which can redirect you to extension 301 is ByW[...]HSZw (this changes periodically)\n* The address of this PBX is 192.168.1.2 (or some domainname, should be reachable by the calling party)\n* The extension to call is 301 (this can be different from what you asked for, e.g. when calls from the outside are not allowed directly to an internal extension)\n* \"EXISTS\" tells us the PBX is advertising this number. It is possible the PBX advertises a lot more extensions than really are connected, so it is no guarantee the extension can be reached.\nIn order to prevent the network from overloading and at the same time keep the responses as quick as possible, the involved peers will cache the lookups they see. Because the used keys may become invalid after some period, each lookup has some expiry date. This defaults to one hour.\nWhen no context is given with a lookup, DUNDi defaults to the E.164 context. This means you are looking for normal (international) phone-numbers, like 0031201234567 (some bogus number in Amsterdam, the Netherlands)\nIn order to do so, you have to peer with at least one other peer in the E164 trust group. The peers in this group are bound to the [https://web.archive.org/web/20080828020004/http://dundi.com/PEERING.pdf Digium GPA (Digium General Peering Agreement)] (PDF)\nExternal links\n* [https://web.archive.org/web/20041022004820/http://www.dundi.com/ DUNDi Home Page]\n* [https://web.archive.org/web/20041022095833/http://www.dundi.com/dundi.txt Internet-Draft that expired in 2005]\n* [https://voipandenum.blogspot.com/2004/10/fall-von-2004-day-4-highlights-since.html VoIP and ENUM]"
    }
  ]
}