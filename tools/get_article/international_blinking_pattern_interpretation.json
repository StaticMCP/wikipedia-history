{
  "content": [
    {
      "type": "text",
      "text": "# International Blinking Pattern Interpretation\n\nThe International Blinking Pattern Interpretation (IBPI) is an internal computer hardware standard.\nIt defines two items:\n# How SGPIO is interpreted into states for drives or slots on a backplane.\n# How light emitting diodes (LEDs) on a backplane should represent these states.\nIBPI was defined by the SFF-8489 specification of the Small Form Factor Special Interest Group in 2011.\nSGPIO has been adopted across the storage industry, and has in large replaced proprietary protocols such as SCSI Enclosure Services (SES) and SAF-TE.  Note, however, that both IBPI and the underlying SGPIO are documenting common practice rather than providing requirements; the entire changelog for version 0.4 of IPBI is \"Text changes made to identify this specification as one alternative, rather than the only one.\"\nStates for drives or slots can be, for example, empty, failed, rebuilding, etc. The state of a drive or slot is determined by the host bus adapter, and is typically transmitted to the backplane through SGPIO-signals on a cable.\nTypical system architecture\nTypical system architecture\nIn a typical system architecture, the host bus adapter (HBA) connects to a backplane through a 4× iPass cable. The SGPIO-signals run inside this cable, as a sideband.\nThe backplane may then optionally connect to the baseboard management controller of a motherboard through an I²C or SMBus.\nThe SGPIO bus consists of 4 electrical signals.  It originates (or is driven by) an initiator, typically a host bus adapter or SAS (Serial_Attached_SCSI) Expander, and arrives at a target, typically a backplane.\nImage:SGPIO F1.jpg\n{| class=\"wikitable\"\n|-\n! Signal\n! Transmitter\n! Description\n|-\n| SClock\n| Initiator\n| Clock Signal\n|-\n| SLoad\n| Initiator\n| Last clock of a bit stream; begin a new bit stream on the next clock\n|-\n| SDataOut*\n| Initiator\n| Serial data output bit stream\n|-\n| SDataIn\n| Target\n| Serial data input bit stream. SDataIn may not be supported by all SGPIO devices\n|}\nSGPIO is typically used in conjunction with SAS or SATA cables, where each physical port is attached to a single disk drive.\nSGPIO bit definitions\nThe figure below shows the relationship between SClock, SLoad and the two data bits named SDataOut and SDataIn. An SGPIO frame is started after SLoad has been low for at least 5 SClock cycles.\nImage:SGPIO F10.gif\nFollowing the start of a new SGPIO frame, 3 bits per drive are driven from the initiator on to the SDataOut line. Simultaneously, the target drives 3 bits on the SDataIn line.\nThe initiator and target both use the rising edge clock to transmit changes in the SLoad, SDataOut, and SDataIn.\nThe figure shows SGPIO for 4 drive slots (12 clocks), which is the minimum allowed. The SGPIO stream can be larger and it is not uncommon for the stream to consist of slot data for 12, 24 or 36 drives/slots in the case of an expander.\nDefinition of the 3 bits\nThe 3 bits per drive is illustrated and interpreted as follows:\nImage:SGPIO F9.gif\nThe first bit (ODn.0) is exclusively used to represent Activity.  The second and third bits; Locate (ODn.1) and Fail (ODn.2) are directly used to represent a locate and fail state of the drive.\n{| class=\"wikitable\"\n|-\n! ODn.0\n! ODn.1\n! ODn.2\n|-\n| Activity\n| Locate\n| Fail\n|}\nShortcomings in SGPIO\nThe original SGPIO stream was intended for a low-cost implementation, and is limited to the capability of representing activity, locate, and fail LEDs. SGPIO became popular and adopted by HBA backplane and backplane vendors in 2004, and increasingly popular after the support by hardware manufacturers.\nWith the advent of SAS/SATA hard drives, backplanes typically do not vary much from low to high end systems, except the addition of an extra physical port in the case of SAS. Since it is not economical for systems vendors to design separate backplanes for high and low end systems, the SGPIO standard became popular also in mid-range and higher end systems.\nIn higher end systems initiators are capable of providing additional useful status information, such as rebuilding drives and predicted failures of drives. There was no standard for representing these conditions in the original SGPIO specification, at the same time as efforts were being made to elaborate a variety of additions to the standard by component vendors. This resulted in the IBPI specification, which uses blinking frequencies of bits in the SGPIO stream to represent additional states of drives.\nSGPIO interpretation\nThere are 3 bits per slot (or hard drive) in the SGPIO specification. This section describes how each of these bits are interpreted according to the IBPI specification.\nOnly the activity bit is interpreted independently of the two other bits. The two other bits (locate and fail) may be interpreted in combination with each other in the special case when both bits are driven solid on. In any other case, the locate and fail bits are interpreted independently.\nNote that the interpreted conditions described in this section is only used to determine the condition of bits, and does not describe how LEDs are driven based on these conditions.\nHard drive presence (slot mated status) and valid states\nWhen the hard drive for a particular slot is not present or has been removed, activity for that slot has no meaning, and should not be interpreted. Since it could still be desirable to locate the slot or indicate a failure, the Locate and Fail bits may have meaning for a particular slot, even if the physical drive is not present.\nActivity bit (ODn.0) interpretation\nThe following section describes how the Activity Bit should be interpreted according to the IBPI specification.\n{| class=\"wikitable\"\n|-\n! Condition\n! SDataOut\n! colspan=2 | SGPIO interpretation\n|-\n! Drive present\n! Activity (ODn.0)\n! State\n! Description\n|-\n| rowspan=2 | Yes\n| 0 || No activity || rowspan=2 | The definition of activity is implementation-dependent.  It could mean busy, or idle and available, or be part of a blinking pattern that conveys additional information. See section 7.4 of SGPIO.\n|-\n| 1 || Activity\n|-\n| No || 0 or 1 || N/A || The activity bit is masked and not used in interpretation. Only the locate and fail bits remain valid for a slot with a drive that is not present\n|}\nLocate bit (ODn.1) and fail bit (ODn.2) interpretation\nThe following section shows how the Locate and Fail bits should be interpreted according to the IBPI specification.\n{| class=\"wikitable\"\n|-\n! colspan=2 | SGPIO SDATAOUT bits\n! colspan=2 | SGPIO interpretation\n|-\n! Locate (ODn.1)\n! Fail (ODn.2)\n! State\n! Description\n|-\n| 1         || 0         || Locate (identify)   || This state is used to identify a slot or drive\n|-\n| 0         || 1         || Fail                || This state indicates a slot with a failed drive\n|-\n| 1         || 1         || Rebuild (preferred) || Because of legacy and cross-compatibility with SGPIO initiators, both interpretations of rebuild should be supported\n|-\n| 0 or 1    || 1&nbsp;Hz || Rebuild (supported)\n|-\n| 0 or 1    || 2&nbsp;Hz || Predicted failure analysis || The drive in this slot is still working but predicted to fail soon\n|-\n| 0 or 1    || 4&nbsp;Hz || Hotspare            || This slot has a drive that is marked to be automatically rebuilt and used as a replacement for a failed drive\n|-\n| 1&nbsp;Hz || 0 or 1    || In a critical array || The array containing this slot is degraded\n|-\n| 2&nbsp;Hz || 0 or 1    || In a failed array   || The array containing this slot is failed\n|-\n| 4&nbsp;Hz || 0 or 1    || Reserved for future use\n|-\n| colspan=4 | n&nbsp;Hz (duty cycle of 50±5%) – Oscillating signal. Signals\nAmerican Megatrends (AMI) announced a product implementing IBPI in January 2009.\nAfter a few revisions in 2011, such as identifying IBPI as just one alternative, revision 0.4 was adopted in November 2011.\nFour companies voted for the standard: AMI, Hewlett-Packard, Molex, and Sandisk. All others abstained.\nReferences"
    }
  ]
}