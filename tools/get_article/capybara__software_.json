{
  "content": [
    {
      "type": "text",
      "text": "# Capybara (software)\n\n| latest release version =\n| latest release date    = }}\n|  operating_system = Cross-platform\n}}\nCapybara is a web-based test automation software that simulates scenarios for user stories and automates web application testing for behavior-driven software development.  It is written in the Ruby programming language.\nCapybara can mimic actions of real users interacting with web-based applications. It can receive pages, parse the HTML and submit forms.\nBackground and motivation\nDuring the software development process (especially in the Agile and Test-driven Development environments), as the size of the tests increase, it becomes difficult to manage tests which are complex and not modular.\nBy extending the human-readable behavior-driven development style of frameworks such as Cucumber  and RSpec into the automation code itself, Capybara aims to develop simple web-based automated tests.\nAnatomy of Capybara\nCapybara is a Ruby library (also referred to as a gem) that is used with an underlying web-based driver. It consists of a user-friendly DSL (Domain Specific Language) which describe actions that are executed by the underlying web driver.\nWhen the page is loaded using the DSL (and underlying web driver), Capybara will attempt to locate the relevant element in the DOM (Document Object Model) and execute an action such as click button, link, etc.\nDrivers\nBy default, Capybara uses the :rack_test driver which does not have any support for executing JavaScript. Drivers can be switched in Before and After blocks. Some of the web drivers supported by Capybara are mentioned below.\nRackTest\nWritten in Ruby, Capybara's default driver RackTest does not require a server to be started since it directly interacts with Rack interfaces. Consequently, it can only be used for Rack applications.\nSelenium\nSelenium-webdriver, which is mostly used in web-based automation frameworks, is supported by Capybara. Unlike Capybara's default driver, it supports JavaScript, can access HTTP resources outside of application and can also be set up for testing in headless mode which is especially useful for CI scenarios.\nCapybara-webkit\nCapybara-webkit driver is used for true headless browser testing with JavaScript support. It uses QtWebKit and it is significantly faster than Selenium as it does not load the entire browser.\nMatchers\nCapybara locates an element either using Domain-specific language or XPath/CSS Selectors. Partial matches can lead to unexpected results. Two or more matches can even result in a failure with an Ambiguous match error. The following are the matching strategies supported by Capybara:\nfirst: Pick the first element which matches. Not advisable to use.\none: Allow only one element match. Error raised if more than one match.\nsmart: If Capybara.exact is true, it behaves like the above option (one). If Capybara.exact is false, it will first try to find an exact match. Ambiguous exception is raised if more than one match is found. If no element is found, a new search for inexact matches is commenced. Again, an ambiguous exception is raised if more than one match is found.\nprefer_exact: Finds all matching (exact and which are not exact) elements. If multiple matches are found then the first exactly matching element is returned discarding other matches.\nUsage\nUser-registration process\nHere is an example of how user registration test is done using Capybara. There is a test to see if the user can continue with the registration process or if there are any holds on him. If he has the requisite credentials, he will be registered and then redirected to the 'Welcome' page.\ndescribe 'UserRegistration' do\nit 'allows a user to register' do\nvisit new_user_registration_path\nfill_in 'First name', :with => 'New'\nfill_in 'Last name', :with => 'User'\nfill_in 'Email', :with => 'newuser@example.com'\nfill_in 'Password', :with => 'userpassword'\nfill_in 'Password Confirmation', :with => 'userpassword'\nclick_button 'Register'\npage.should have_content 'Welcome'\nend\nend\nCapybara with Cucumber\nAn example of a Capybara feature used with Cucumber:\nWhen /^I want to add/ do\nfill_in 'a', :with => 100\nfill_in 'b', :with => 100\nclick_button 'Add'\nend\nCapybara with RSpec\nSome minute integration is required in order to use Capybara with RSpec\ndescribe 'go to home page' do\nit 'opens the home page' do\nvisit (get_homepage)\nexpect(page).to have_content('Welcome')\nend\nend\nSimilar tools\n* Watir\n* Selenium (software)\nSee also\n* Acceptance testing\n* Acceptance test-driven development\n* Behavior-driven development\n* Test automation\n* HtmlUnit\n* List of web testing tools\n* Regression testing\n* Given-When-Then\nReferences"
    }
  ]
}